# <center> Lecture 6 Note

## 一、 走样 (Aliasing)
### 1. 什么是走样?
走样是采样过程中，因采样频率跟不上信号变化速度而产生的一种图像瑕疵。

### 2. 常见的走样现象 (Sampling Artifacts):

**锯齿 (Jaggies)**: 空间采样不足，导致物体边缘出现锯齿状。

**摩尔纹 (Moiré Patterns**): 对图像进行欠采样（undersampling）时，出现的不规则干涉条纹。

**车轮效应 (Wagon Wheel Effect)**: 时间采样不足，导致高速旋转的物体（如车轮）看起来在静止、倒转或慢速正转。

## 二、 频域分析 (Frequency Analysis)
要理解走样，需要从信号处理的频域视角来分析。

### 1. 傅里叶变换 (Fourier Transform):
可以将一个函数（时域/空域信号）分解成由不同频率的正弦/余弦波叠加的形式（频域信号）。

+ **时域 (Spatial Domain)**: 我们看到的图像本身。

+ **频域 (Frequency Domain)**: 描述了构成这张图像的各种频率成分。频域图中心通常代表**低频**（平缓区域），边缘代表**高频**（图像细节、边界）。

### 2. 走样的频域解释:
当采样频率过低，不足以捕捉信号中的高频部分时，这些高频信号会“伪装”成低频信号，导致信号失真。在频域上，重复的频谱内容发生了重叠。

## 三、 反走样 (Antialiasing)
### 1. 核心思想：先模糊，再采样
既然走样是因为信号频率太高、采样率跟不上，那么正确的思路是：在采样之前，先通过滤波去除信号中那些会引起混叠的高频成分。

**重要**: 必须是**先模糊（滤波），再采样**。如果顺序反了，先采样再模糊，那么在采样那一步信息就已经丢失，后续的模糊操作无法挽回走样(新类型的错误)。

### 2. 什么是滤波 (Filtering)？
**滤波**: 指的是去除信号中特定的频率成分。

+ **低通滤波 (Low-pass Filter)**: 只允许低频信号通过，会使图像模糊 (Blur)。

+ **高通滤波 (High-pass Filter)**: 只允许高频信号通过，会提取出图像的边缘 (Edges)。

### 3. 滤波的实现：卷积 (Convolution)
在图像空间中，滤波通常通过卷积操作来实现。即将一个小的**卷积核 (Filter Kernel)**（如一个3x3的模糊矩阵）滑过整张图像，进行加权平均。

**卷积定理 (Convolution Theorem):**
空域的卷积 **等价于** 频域的乘积。

这意味着，我们可以通过将图像的频谱与一个低通滤波器的频谱相乘，来实现对图像的模糊处理。

## 四、 反走样的实践
### 1. 多重采样抗锯齿 (MSAA)
理论上，最完美的抗锯齿是计算出三角形在一个像素区域内的覆盖面积，并以此作为像素的颜色权重。但在实践中，这个计算非常复杂。

**MSAA核心步骤:**

- 将一个像素内部再细分成 N×N 个子采样点 (Supersamples)。

- 判断每个子采样点是否在三角形内部。

- 最终该像素的颜色值，等于被三角形覆盖的子采样点数量所占的百分比。例如，一个像素内有4个子采样点，其中3个在三角形内，那么该像素的颜色就是 75% * 三角形颜色。

代价: MSAA的代价是增加了计算量，需要对更多的点进行内外判断和深度测试。

### 2. 其他方法
还有很多重要的抗锯齿技术，如 
 - **FXAA (快速近似抗锯齿)**: 快速扫描整张图像，检测像素间的颜色对比度，从而找到那些看起来像“锯齿”的边缘。一旦找到，就对这些边缘像素应用一个定向的、局部的模糊，使其变得平滑。
 -  **TAA (时间抗锯齿，利用前一帧的信息)**: 通过结合当前帧和前一帧的像素信息，来平滑边缘。TAA利用了时间上的连续性，可以更好地处理动态场景中的锯齿问题。